'use strict';window.tsf={nonces:tsfL10n.nonces,i18n:tsfL10n.i18n,states:tsfL10n.states,params:tsfL10n.params,settingsChanged:!1,counterType:0,hasInput:!1,browseUnhappy:!!navigator.userAgent.match(/Trident\/7\./),counterClasses:{0:"tsf-counter-zero",1:"tsf-counter-one",2:"tsf-counter-two",3:"tsf-counter-three"},confirm:function(e){return confirm(e)},stripTags:function(e){return e.replace(/(<([^>]+)?>?)/ig,"")},escapeString:function(e){if(!e.length)return"";let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\\\\":"&#92;","\\":""};return e.replace(/[&<>"']|\\\\|\\/g,e=>t[e])},unescapeString:function(e){if(!e.length)return"";let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\\":"&#92;"},i={};i=tsf.browseUnhappy?Object.keys(t).map(i=>t[i]):Object.values(t);let s=new RegExp(i.map(e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).join("|"),"g");return tsf.browseUnhappy?e.replace(s,e=>{for(let i in t)if(t[i]===e)return i;return e}):e.replace(s,e=>Object.keys(t).find(i=>t[i]===e))},sDoubleSpace:function(e){return e.replace(/\s\s+/g," ")},getStringLength:function(t){let i,s=0;return t.length&&(i=document.createElement("span"),i.innerHTML=tsf.escapeString(t).trim(),"undefined"!=typeof i.childNodes[0]&&(s=i.childNodes[0].nodeValue.length)),+s},convertJSONResponse:function(e){let t=e&&e.json||void 0,i=1===t;if(!i){let t=e;try{e=JSON.parse(e),i=!0}catch(e){i=!1}i||(e=t)}return e},updateCharacterCounter:function(e){let t=e.e,i=e.text,s=e.guidelines,n=tsf.getStringLength(i),a="",o="",r={bad:"tsf-count-bad",okay:"tsf-count-okay",good:"tsf-count-good",unknown:"tsf-count-unknown"};switch(n?n<s.lower?(a=r.bad,o=tsf.i18n.inputGuidelines.short.farTooShort):n<s.goodLower?(a=r.okay,o=tsf.i18n.inputGuidelines.short.tooShort):n>s.upper?(a=r.bad,o=tsf.i18n.inputGuidelines.short.farTooLong):n>s.goodUpper?(a=r.okay,o=tsf.i18n.inputGuidelines.short.tooLong):(a=r.good,o=tsf.i18n.inputGuidelines.short.good):(a=r.unknown,o=tsf.i18n.inputGuidelines.short.empty),tsf.counterType){case 3:o=n.toString()+" - "+o;break;case 2:break;case 1:default:o=n.toString();}for(let i in t.innerHTML=o,r)t.classList.remove(r[i]);for(let i in tsf.counterClasses)t.classList.remove(tsf.counterClasses[i]);t.classList.add(a),t.classList.add(tsf.counterClasses[tsf.counterType])},updatePixelCounter:function(e){let t=e.e,i=e.text,s=e.guidelines,n=t.parentElement;if(!n)return;let a=n.querySelector(".tsf-pixel-counter-bar"),o=n.querySelector(".tsf-pixel-counter-shadow");if(!a||!o)return;o.innerHTML=tsf.escapeString(i);let r=o.offsetWidth,l="",p="",c="",g={bad:"tsf-pixel-counter-bad",okay:"tsf-pixel-counter-okay",good:"tsf-pixel-counter-good",unknown:"tsf-pixel-counter-unknown"};p=100*(r/s.goodUpper)+"%",r?r<s.lower?(l=g.bad,c=tsf.i18n.inputGuidelines.long.farTooShort):r<s.goodLower?(l=g.okay,c=tsf.i18n.inputGuidelines.long.tooShort):r>s.upper?(p=100*(s.upper/(r+2*(r-s.upper)/3))+"%",l=g.bad,c=tsf.i18n.inputGuidelines.long.farTooLong):r>s.goodUpper?(l=g.okay,c=tsf.i18n.inputGuidelines.long.tooLong,p="100%"):(l=g.good,c=tsf.i18n.inputGuidelines.long.good):(l=g.unknown,p="100%",c=tsf.i18n.inputGuidelines.long.empty);let d,u=a.querySelector(".tsf-pixel-counter-fluid");for(let t in d=tsf.i18n.pixelsUsed.replace(/%1\$d/g,r),d=d.replace(/%2\$d/g,s.goodUpper),d=d+"<br>"+c,g)a.classList.remove(g[t]);a.classList.add(l),u.style.width=p,a.dataset.desc=d,a.setAttribute("aria-label",tsf.escapeString(d.replace(/(<([^>]+)?>?)/ig," "))),tsfTT.triggerUpdate(a)},_initTitleInputs:function(){if(!tsf.hasInput)return;let e=jQuery("#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]");if(!e.length)return;let t,i,s,n,a=!1,o="",r="",l=tsf.params.titleSeparator,p=tsf.params.defaultTitle,c=tsf.states.useTagline,g=tsf.states.isRTL,d=tsf.states.isPrivate,u=tsf.states.isPasswordProtected,f=tsf.states.stripTitleTags;t=g?"after":"before";const h=function(){let e="before";tsf.states.isSettingsPage?g?"right"===jQuery("#tsf-home-title-location input:checked").val()&&(e="after"):"left"===jQuery("#tsf-home-title-location input:checked").val()&&(e="after"):tsf.states.isHome?g?"right"===tsf.params.titleLocation&&(e="after"):"left"===tsf.params.titleLocation&&(e="after"):g?"left"===tsf.params.titleLocation&&(e="after"):"right"===tsf.params.titleLocation&&(e="after"),i=e};h();const m=function(){let t="";if(!tsf.states.isSettingsPage)tsf.states.isHome?c&&(t=tsf.params.titleAdditions):c&&(t=tsf.params.titleAdditions);else if(c){let i=document.getElementById("autodescription-site-settings[homepage_title_tagline]"),e=i&&i.value||"";e=tsf.sDoubleSpace(e.trim()),t=e.length?e:tsf.params.blogDescription}t.length&&(t=tsf.escapeString(tsf.sDoubleSpace(t.trim())),"before"===i?t=t+" "+l+" ":"after"===i?t=" "+l+" "+t:void 0);r=t.length?t:"",n=document.getElementById("tsf-title-placeholder"),r.length&&n&&(n.innerHTML=r)};m();const b=function(){let e="";d?e=tsf.i18n.privateTitle:u&&(e=tsf.i18n.protectedTitle);e.length&&(e=tsf.escapeString(e),"before"===t?e+=" ":"after"===t?e=" "+e:void 0);o=e.length?e:"",o.length&&s&&(s.innerHTML=o),s=document.getElementById("tsf-title-placeholder-prefix"),o.length&&s&&(s.innerHTML=o)};b();const x=function(e){if(!n&&!s)return;let t=jQuery(e.target),a=t.val(),l=!!r.length,p=!!o.length;if(!l&&n&&(n.style.display="none"),!p&&s&&(s.style.display="none"),!l&&!p)return void t.css("text-indent","initial");if(!a.length)return t.css("text-indent","initial"),n&&(n.style.display="none"),void(s&&(s.style.display="none"));let c=t.outerWidth(!0),d=(t.outerHeight(!0)-t.height())/2,u=(c-t.innerWidth())/2,f=g?"right":"left",h=(t.outerWidth(!0)-t.width())/2,m={display:t.css("display"),lineHeight:t.css("lineHeight"),fontFamily:t.css("fontFamily"),fontWeight:t.css("fontWeight"),fontSize:t.css("fontSize"),letterSpacing:t.css("letterSpacing"),paddingTop:d+"px",paddingBottom:d+"px"},b=jQuery(s),x=jQuery(n),y=0,_=0,v=0,k=0,L=0,C=0;if(p&&(b.css(m),b.css({maxWidth:"initial"}),L=b[0].getBoundingClientRect().width,L<C&&(L=0)),l){let e=0;switch(function(){let t=jQuery("#tsf-title-offset");t.text(a),t.css({fontFamily:m.fontFamily,fontWeight:m.fontWeight,letterSpacing:m.letterSpacing,fontSize:m.fontSize}),e=t[0].getBoundingClientRect().width}(),y=t[0].getBoundingClientRect().width-u-h-e-L,y<C&&(L+=y,y=0),x.css(m),x.css({maxWidth:"initial"}),i){case"before":let s=x[0].getBoundingClientRect().width;s=y<s?y:s,s<C&&(s=0),y=s,k+=y,v+=y,_+=h;break;case"after":_+=h+e+L;}}v+=h,L=0>L?0:L,k+=L;let w;p&&(w={},w[f]=v+"px",w.maxWidth=L+"px",b.css(w)),l&&(w={},w[f]=_+"px",w.maxWidth=y+"px",x.css(w)),w={},w["text-indent"]=k+"px",t.css(w)},y=function(){let s="",n=!!r.length,l=!!o.length,c=r,d=o;tsf.states.isTermEdit&&tsf.params.termName&&(d=g?" :"+tsf.params.termName:tsf.params.termName+": ",l=tsf.states.useTermPrefix),s=p;l&&("before"===t?s=d+s:"after"===t?s+=d:void 0);n&&("before"===i?s=c+s:"after"===i?s+=c:void 0);tsf.browseUnhappy&&(a=!0);let u=document.createElement("span");u.innerHTML=tsf.escapeString(tsf.sDoubleSpace(s)),e.prop("placeholder",tsf.unescapeString(u.textContent)),tsf.browseUnhappy&&setTimeout(function(){a=!1},0)},_=function(e){let s=document.getElementById("tsf-title-reference"),n=e.target.value;s&&(n=n.trim(),1>n.length||tsf.states.homeLocks.refTitleLock?n=e.target.placeholder:(o.length&&("before"===t?n=o+n:"after"===t?n+=o:void 0),r.length&&("before"===i?n=r+n:"after"===i?n+=r:void 0)),s.innerHTML=tsf.escapeString(tsf.sDoubleSpace(n)),setTimeout(()=>{jQuery(s).change()},0))},v=function(e){let t=document.getElementById(e.target.id+"_chars"),i=document.getElementById("tsf-title-reference");if(t&&i){let e={e:t,text:tsf.unescapeString(i.innerHTML),guidelines:tsf.params.inputGuidelines.title.search.chars};tsf.updateCharacterCounter(e)}},k=function(e){let t=document.getElementById(e.target.id+"_pixels"),i=document.getElementById("tsf-title-reference");if(t&&i){let e={e:t,text:tsf.unescapeString(i.innerHTML),guidelines:tsf.params.inputGuidelines.title.search.pixels};tsf.updatePixelCounter(e)}},L=function(e){return!a&&void(x(e),y(),_(e),v(e),k(e))};e.on("input.tsfUpdateTitles",L);e.on("tsf-update-title-counter",function(e){_(e),v(e),k(e)});const C=function(){e.trigger("tsf-update-title-counter")},w=function(){m(),D()};jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").on("input",w),jQuery("#autodescription-site-settings\\[homepage_tagline\\]").on("change",w);const T=function(e){let t=c;jQuery(e.target).is(":checked")?(jQuery(".tsf-custom-blogname-js").css("display","inline"),c=!0):(jQuery(".tsf-custom-blogname-js").css("display","none"),c=!1),t^c&&(m(),P())};jQuery("#tsf-title-tagline-toggle :input").on("click",T);const S=e=>{switch(d=!1,u=!1,e){case"password":u=!0;break;case"private":d=!0;break;default:case"public":}b(),P()};jQuery(document).on("tsf-updated-gutenberg-visibility",(e,t)=>S(t));jQuery("#visibility .save-post-visibility").on("click",()=>{let e=jQuery("#visibility").find("input:radio:checked").val();if("password"===e){let t=jQuery("#visibility").find("#post_password").val(),i=!!t&&!!t.length;i||(e="public")}S(e)});const I=function(e){let t=jQuery(e.target).val(),i="";switch(t){case"pipe":i="|";break;case"dash":i="-";break;default:i=jQuery("<div/>").html("&"+t+";").text();}l=i,jQuery(".tsf-sep-js").text(" "+l+" "),m(),P()};jQuery("#tsf-title-separator :input").on("click",I);const D=function(){e.trigger("input.tsfUpdateTitles")};let U=0;const P=function(){clearTimeout(U),U=setTimeout(D,10)};jQuery(window).on("tsf-counter-updated",P);const W=function(){let e=tsf.settingsChanged;D(),tsf.settingsChanged=e};let j=0;const H=function(){clearTimeout(j),j=setTimeout(W,10)};jQuery(window).on("tsf-flex-resize",H),jQuery("#tsf-homepage-tab-general").on("tsf-tab-toggled",H),jQuery("#tsf-flex-inpost-tab-general").on("tsf-flex-tab-toggled",H),H();let R=["autodescription-homepage-settings","tsf-inpost-box"];jQuery(document).on("postbox-toggled",function(e,t){if(0<=R.indexOf(t.id)){let e=t.querySelector(".inside");0<e.offsetHeight&&0<e.offsetWidth&&W()}});jQuery("#tsf-home-title-location :input").on("click",function(){h(),m(),P()});const E=function(e){e="string"==typeof e&&e.trim()||"",p=e.length?tsf.escapeString(f?tsf.stripTags(e):e):tsf.params.untitledTitle,y(),C()};tsf.states.isHome||(jQuery("#edittag #name, #titlewrap #title").on("input",e=>E(e.target.value)),jQuery(document).on("tsf-updated-gutenberg-title",(e,t)=>E(t)));const z=function(e){if(!tsf.states.taglineLocked){let t=c;c=!jQuery(e.target).is(":checked"),t^c&&(m(),P())}};tsf.states.isHome||(jQuery("#autodescription_title_no_blogname").on("change",z),jQuery("#autodescription_title_no_blogname").trigger("change"));(function(){let e=0,t=window.innerWidth;window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){let e=window.innerWidth;t<e?782>=t&&782<=e&&W():782<=t&&782>=e&&W(),t=e},50)})})()},_initUnboundTitleSettings:function(){if(!tsf.hasInput)return;let e=jQuery("#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]");jQuery("#tsf-title-placeholder, #tsf-title-placeholder-prefix").on("click",function(t){let i=jQuery(t.target).siblings(e)[0];if("function"==typeof i.setSelectionRange){i.focus();let e=2*i.value.length;i.setSelectionRange(e,e)}else{let e=i.value;i.value="",i.focus(),i.value=e}});jQuery("#autodescription-site-settings\\[title_rem_additions\\]").on("click",function(e){jQuery(e.target).is(":checked")?jQuery(".tsf-title-additions-js").css("display","none"):jQuery(".tsf-title-additions-js").css("display","inline")});jQuery("#tsf-title-location input").on("click",function(e){let t=jQuery(".tsf-title-additions-example-left"),i=jQuery(".tsf-title-additions-example-right");"right"===jQuery(e.target).val()?(t.css("display","none"),i.css("display","inline")):(t.css("display","inline"),i.css("display","none"))});jQuery("#autodescription-site-settings\\[homepage_title\\]").on("input",function(e){let t=e.target.value||"",i=jQuery(".tsf-custom-title-js");0===t.length?i.text(tsf.params.defaultTitle):i.text(t)});jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").on("input.tsfInputTagline",function(e){let t=e.target.value||"",i=jQuery(".tsf-custom-tagline-js");t=tsf.escapeString(tsf.sDoubleSpace(t.trim())),t.length?(i.html(t),jQuery("#tsf-home-title-location .tsf-sep-js").show()):(i.text(tsf.params.blogDescription),0===tsf.params.blogDescription.length?jQuery("#tsf-home-title-location .tsf-sep-js").hide():jQuery("#tsf-home-title-location .tsf-sep-js").show())}),jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").trigger("input.tsfInputTagline");jQuery("#tsf-title-prefixes-toggle :input").on("click",function(e){let t=jQuery(e.target),i=jQuery(".tsf-title-prefix-example");t.is(":checked")?i.css("display","none"):i.css("display","inline")})},_initDescInputs:function(){if(!tsf.hasInput)return;let e=jQuery("#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]");if(!e.length)return;const t=function(e){let t=document.getElementById(e.target.id+"_chars"),i=document.getElementById("tsf-description-reference");if(t&&i){let e={e:t,text:tsf.unescapeString(i.innerHTML),guidelines:tsf.params.inputGuidelines.description.search.chars};tsf.updateCharacterCounter(e)}},i=function(e){let t=document.getElementById("tsf-description-reference"),i=e.target.value;t&&(i=i.trim(),(1>i.length||tsf.states.homeLocks.refDescriptionLock)&&(i=e.target.placeholder),t.innerHTML=tsf.escapeString(tsf.sDoubleSpace(i)),setTimeout(()=>{jQuery(t).change()},0))},s=function(e){let t=document.getElementById(e.target.id+"_pixels"),i=document.getElementById("tsf-description-reference");if(t&&i){let e={e:t,text:tsf.unescapeString(i.innerHTML),guidelines:tsf.params.inputGuidelines.description.search.pixels};tsf.updatePixelCounter(e)}};e.on("input.tsfUpdateDescriptions",function(e){i(e),t(e),s(e)});const n=function(){e.trigger("input.tsfUpdateDescriptions")};let a=0;const o=function(){clearTimeout(a),a=setTimeout(n,10)};jQuery(window).on("tsf-counter-updated",o);const r=function(){let e=tsf.settingsChanged;n(),tsf.settingsChanged=e};let l=0;const p=function(){clearTimeout(l),l=setTimeout(r,10)};jQuery("#tsf-homepage-tab-general").on("tsf-tab-toggled",p),jQuery("#tsf-flex-inpost-tab-general").on("tsf-flex-tab-toggled",p),p();let c=["autodescription-homepage-settings","tsf-inpost-box"];jQuery(document).on("postbox-toggled",function(e,t){if(0<=c.indexOf(t.id)){let e=t.querySelector(".inside");0<e.offsetHeight&&0<e.offsetWidth&&o()}})},_initSocialTitleInputs:function(){if(!tsf.hasInput)return;let e=jQuery("#autodescription_og_title, #autodescription-site-settings\\[homepage_og_title\\]"),t=jQuery("#autodescription_twitter_title, #autodescription-site-settings\\[homepage_twitter_title\\]"),i=jQuery("#tsf-title-reference");if(!e.length||!t.length||!i.length)return;let s=!1,n=tsf.states.homeLocks.ogTitleLock,a=tsf.states.homeLocks.ogTitlePHLock,o=tsf.states.homeLocks.twTitleLock,r=tsf.states.homeLocks.twTitlePHLock,l=n?e.prop("placeholder"):e.val(),p=o?t.prop("placeholder"):t.val(),c=i.text();const g=i=>{let s="";switchActive:switch(i){case"twitter":if(s=p,o||r){s=s.length?s:t.prop("placeholder");break switchActive}case"og":if(s=s.length?s:l,n||a){s=s.length?s:e.prop("placeholder");break switchActive}case"reference":s=s.length?s:c;}return s},d=()=>{tsf.browseUnhappy&&(s=!0),n||a||e.prop("placeholder",g("reference")),o||r||t.prop("placeholder",g("og")),tsf.browseUnhappy&&setTimeout(()=>{s=!1},0)},u=(e,t,i)=>{let s=document.getElementById(e.id+"_chars");if(s){let e={e:s,text:tsf.unescapeString(t),guidelines:tsf.params.inputGuidelines.title[i].chars};tsf.updateCharacterCounter(e)}};let f=0;const h=()=>{clearTimeout(f),f=setTimeout(()=>{e.each((e,t)=>u(t,g("og"),"opengraph")),t.each((e,t)=>u(t,g("twitter"),"twitter"))},10)};i.on("change",()=>{c=i.text(),d(),h()});const m=e=>{if(!s){if(!n){let t=e.target.value.trim();l=t.length?tsf.sDoubleSpace(t):""}d(),h()}},b=e=>{if(!s){if(!o){let t=e.target.value.trim();p=t.length?tsf.sDoubleSpace(t):""}d(),h()}};e.on("input.tsfUpdateOgTitle",m),t.on("input.tsfUpdateTwTitle",b)},_initSocialDescInputs:function(){if(!tsf.hasInput)return;let e=jQuery("#autodescription_og_description, #autodescription-site-settings\\[homepage_og_description\\]"),t=jQuery("#autodescription_twitter_description, #autodescription-site-settings\\[homepage_twitter_description\\]"),i=jQuery("#tsf-description-reference");if(!e.length||!t.length||!i.length)return;let s=!1,n=tsf.states.homeLocks.ogDescriptionLock,a=tsf.states.homeLocks.ogDescriptionPHLock,o=tsf.states.homeLocks.twDescriptionLock,r=tsf.states.homeLocks.twDescriptionPHLock,l=n?e.prop("placeholder"):e.val(),p=o?t.prop("placeholder"):t.val(),c=i.text(),g=jQuery("#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]");const d=(i,s)=>{let d="";switchActive:switch(i){case"twitter":if(d=p,o||r){d=d.length?d:t.prop("placeholder");break switchActive}case"og":if(d=d.length?d:l,n||a){d=d.length?d:e.prop("placeholder");break switchActive}case"reference":d.length||(g.val().length?d=c:"twitter"===s?d=tsf.params.socialPlaceholders.twDesc:"og"==s&&(d=tsf.params.socialPlaceholders.ogDesc));}return d},u=()=>{tsf.browseUnhappy&&(s=!0),n||a||e.attr("placeholder",d("reference","og")),o||r||t.attr("placeholder",d("og","twitter")),tsf.browseUnhappy&&setTimeout(function(){s=!1},0)},f=(e,t,i)=>{let s=document.getElementById(e.id+"_chars");if(s){let e={e:s,text:tsf.unescapeString(t),guidelines:tsf.params.inputGuidelines.description[i].chars};tsf.updateCharacterCounter(e)}};let h=0;const m=()=>{clearTimeout(h),h=setTimeout(()=>{e.each((e,t)=>f(t,d("og","og"),"opengraph")),t.each((e,t)=>f(t,d("twitter","twitter"),"twitter"))},10)};i.on("change",()=>{c=i.text(),u(),m()});const b=e=>{if(!s){if(!n){let t=e.target.value.trim();l=t.length?tsf.sDoubleSpace(t):""}u(),m()}},x=e=>{if(!s){if(!o){let t=e.target.value.trim();p=t.length?tsf.sDoubleSpace(t):""}u(),m()}};e.on("input.tsfUpdateOgDesc",b),t.on("input.tsfUpdateOgDesc",x)},_initCanonicalInput:function(){let e=jQuery("#autodescription_canonical");if(!e)return;const t=t=>{e.attr("placeholder",t)};jQuery(document).on("tsf-updated-gutenberg-link",(e,i)=>t(i))},_initWebmastersInput:function(){if(tsf.states.isSettingsPage){let e=jQuery("#autodescription-site-settings\\[google_verification\\], #autodescription-site-settings\\[bing_verification\\], #autodescription-site-settings\\[yandex_verification\\], #autodescription-site-settings\\[pint_verification\\]");e.length&&e.on("paste",e=>{let t=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData("text")||void 0;if(t){let i=/<meta[^>]+content=(\"|\')?([^\"\'>\s]+)\1?.*?>/i.exec(t);i&&2 in i&&"string"==typeof i[2]&&i[2].length&&(e.stopPropagation(),e.preventDefault(),e.target.value=i[2])}})}},_initCounters:function(){if(!tsf.hasInput)return;jQuery(".tsf-counter").on("click",function(){++tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),e();let t=".tsf-counter-wrap .tsf-ajax",i=0;tsf.resetAjaxLoader(".tsf-counter-wrap .tsf-ajax"),tsf.setAjaxLoader(".tsf-counter-wrap .tsf-ajax");let s={method:"POST",url:ajaxurl,datatype:"json",data:{action:"the_seo_framework_update_counter",nonce:tsf.nonces.edit_posts,val:tsf.counterType},async:!0,success:function(e){switch(e=tsf.convertJSONResponse(e),"success"===e.type&&(i=1),i){case 0:tsf.unsetAjaxLoader(t,!1);break;case 1:tsf.unsetAjaxLoader(t,!0);break;default:tsf.resetAjaxLoader(t);}}};jQuery.ajax(s)});const e=function(){tsf.counterType=+tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),tsf._triggerCounterUpdate()};jQuery("#autodescription-site-settings\\[display_character_counter\\]").on("click",function(e){jQuery(e.target).is(":checked")?jQuery(".tsf-counter-wrap").show():jQuery(".tsf-counter-wrap").hide()});jQuery("#autodescription-site-settings\\[display_pixel_counter\\]").on("click",function(e){jQuery(e.target).is(":checked")?(jQuery(".tsf-pixel-counter-wrap").show(),tsf._triggerCounterUpdate()):jQuery(".tsf-pixel-counter-wrap").hide()})},tabToggle:function(e,t){let i=jQuery(e.target);if(!i.is(":checked"))return;t="boolean"==typeof t&&t;let s=e.target.id,n=e.target.name,a="tsf-active-tab-content",o="tsf-tab-active",r=jQuery("."+a),l=i.closest(".tsf-nav-tab-wrapper").find("."+o),p=r.find("input:invalid, select:invalid, textarea:invalid");if(p.length){try{p[0].reportValidity()}catch(t){let i=jQuery(e.target.form).find("input[type=submit]").not(".autodescription-site-settings\\[tsf-settings-reset\\]");i.length&&i[0].click()}return l.prop("checked",!0),i.prop("checked",!1),e.stopPropagation(),e.preventDefault(),!1}let c=jQuery("#"+s+"-content");if(l.removeClass(o),l.siblings("label").removeClass("tsf-no-focus-ring"),i.addClass(o),t){let e=jQuery("."+n+"-content");e.removeClass(a).hide(),c.addClass(a).show(),jQuery("#"+s).trigger("tsf-tab-toggled")}else if(c.length&&!c.is(r)){let e=jQuery("."+n+"-content");e.fadeOut(150,function(){jQuery(this).removeClass(a)}),setTimeout(()=>{c.addClass(a).fadeIn(250)},150),setTimeout(()=>{jQuery("#"+s).trigger("tsf-tab-toggled")},175)}},flexTabToggle:function(e,t){let i=jQuery(e.target);if(!i.is(":checked"))return;t="boolean"==typeof t&&t;let s=e.target.id,n=e.target.name,a="tsf-flex-tab-content-active",o="tsf-flex-tab-active",r=jQuery("."+a),l=i.closest(".tsf-flex-nav-tab-wrapper").find("."+o),p=r.find("input:invalid, select:invalid, textarea:invalid");if(p.length){try{p[0].reportValidity()}catch(t){let i=jQuery(e.target.form).find("#publishing-action input[type=\"submit\"], #save-action input[type=\"submit\"]");i.length&&i[0].click()}return l.prop("checked",!0),i.prop("checked",!1),e.stopPropagation(),e.preventDefault(),!1}let c=jQuery("#"+s+"-content");if(l.removeClass(o),l.siblings("label").removeClass("tsf-no-focus-ring"),i.addClass(o),t){let e=jQuery("."+n+"-content");e.removeClass(a).hide(),c.addClass(a).show(),jQuery("#"+s).trigger("tsf-flex-tab-toggled")}else if(c.length&&!c.is(r)){let e=jQuery("."+n+"-content");e.fadeOut(150,function(){jQuery(this).removeClass(a)}),setTimeout(()=>{c.addClass(a).fadeIn(250)},150),setTimeout(()=>{jQuery("#"+s).trigger("tsf-flex-tab-toggled")},175)}},addNoFocusClass:function(){this.classList.add("tsf-no-focus-ring")},setTabsOnload:function(){tsf.hasInput&&(tsf.states.isPostEdit&&jQuery(".tsf-flex-nav-tab-radio:checked").trigger("change",[!0]),tsf.states.isSettingsPage&&jQuery(".tsf-tabs-radio:checked").each((e,t)=>{jQuery(t).trigger("change",[!0])}))},_initPostboxToggle:function(){let e;if(tsf.states.isSettingsPage?e=jQuery(".postbox[id^=\"autodescription-\"]").find(".hndle, .handlediv"):tsf.states.isPostEdit&&(e=jQuery(".postbox#tsf-inpost-box").find(".hndle, .handlediv")),!e||!e.length)return;let t;const i=()=>{try{t[0].reportValidity()}catch(e){let i=jQuery(t[0].form).find("input[type=submit]").not(".autodescription-site-settings\\[tsf-settings-reset\\]");i.length&&i[0].click()}},s=e=>{let s=jQuery(e.target).closest(".postbox");s[0].classList.contains("closed")&&(t=s.find("input:invalid, select:invalid, textarea:invalid"),t.length&&(jQuery(document).one("postbox-toggled",i),jQuery(e.target).trigger("click")))};e.on("click.tsfPostboxes",s)},taglineToggleOnload:function(){if(tsf.hasInput){let e=jQuery("#tsf-title-tagline-toggle :input"),t=jQuery(".tsf-custom-blogname-js"),i=jQuery("#tsf-title-additions-toggle :input"),s=jQuery(".tsf-title-additions-js");e.is(":checked")?t.css("display","inline"):t.css("display","none"),i.is(":checked")?s.css("display","none"):s.css("display","inline")}},attachUnsavedChangesListener:function(){if(!tsf.hasInput)return;const e=e=>{jQuery(e.data._input).not(e.data._except).off(e.type,t)},t=t=>{tsf.registerChange(),e(t)};let i;i=".tsf-metaboxes :input, #tsf-inpost-box .inside :input",jQuery(i).not(".tsf-input-not-saved").off("change.tsfChangeListener").on("change.tsfChangeListener",{_input:i,_except:".tsf-input-not-saved"},t),jQuery(document).off("tsf-gutenberg-saved-document.tsfChangeListener").on("tsf-gutenberg-saved-document.tsfChangeListener",()=>{tsf.settingsChanged=!1}),i=".tsf-metaboxes input[type=text], .tsf-metaboxes textarea, #tsf-inpost-box .inside input[type=text], #tsf-inpost-box .inside textarea",jQuery(i).not(".tsf-input-not-saved").off("input.tsfChangeListener").on("input.tsfChangeListener",{_input:i,_except:".tsf-input-not-saved"},t),jQuery(window).off("beforeunload.tsfChangeListener").on("beforeunload.tsfChangeListener",()=>{if(tsf.settingsChanged)return tsf.i18n.saveAlert}),jQuery(".tsf-metaboxes input[type=\"submit\"], #publishing-action input[type=\"submit\"], #save-action input[type=\"submit\"], a.submitdelete").off("click.tsfChangeListener").on("click.tsfChangeListener",()=>{tsf.settingsChanged=!1})},registerChange:function(){tsf.settingsChanged=!0},confirmedReset:function(){return confirm(tsf.i18n.confirmReset)},onLoadUnregisterChange:function(){tsf.settingsChanged=!1},dismissNotice:function(e){jQuery(e.target).parents(".tsf-notice").slideUp(200,function(){this.remove()})},setAjaxLoader:function(e){jQuery(e).toggleClass("tsf-loading")},unsetAjaxLoader:function(e,t){let i="tsf-success",s=2500;t||(i="tsf-error",s=5e3),jQuery(e).removeClass("tsf-loading").addClass(i).fadeOut(s)},resetAjaxLoader:function(e){jQuery(e).stop().empty().prop("class","tsf-ajax").css("opacity","1").removeProp("style")},setColorOnload:function(){let e=jQuery(".tsf-color-picker");e.length&&jQuery.each(e,function(e,t){let i=jQuery(t),s="",n=i.data("tsf-default-color");i.wpColorPicker({defaultColor:n,width:238,change:function(){s=i.wpColorPicker("color"),""===s&&(s=n),i.val(s),tsf.registerChange()},clear:function(){i.parent().siblings(".wp-color-result").css("backgroundColor",n),tsf.registerChange()},palettes:!1})})},_doFlexResizeListener:function(){if(!jQuery(".tsf-flex").length)return;tsf._setResizeListeners();let e=0,t={},i=0,s=jQuery(".tsf-flex-nav-tab-wrapper"),n=jQuery(window);n.on("tsf-flex-resize",function(){clearTimeout(e);let n=0;e=setTimeout(function(){if(s.length){let e=jQuery(".tsf-flex-nav-tab-inner"),i=s.width(),a=e.width(),o=jQuery(".tsf-flex-nav-name");t.tabWrapper||(t.tabWrapper={},t.tabWrapper.outer=0,t.tabWrapper.inner=0,t.tabWrapper.shown=1),!t.tabWrapper.shown&&t.tabWrapper.outer<i&&(o.fadeIn(250),setTimeout(function(){a=e.width()},n)),setTimeout(function(){a>i?(o.hide(),t.tabWrapper.shown=0):t.tabWrapper.outer<i&&(o.fadeIn(250),t.tabWrapper.shown=1)},2*n),setTimeout(function(){t.tabWrapper.outer=i,t.tabWrapper.inner=a},3*n)}},i),n=10,i=75}),n.trigger("tsf-flex-resize")},_setResizeListeners:function(){jQuery(window).on("resize orientationchange",tsf._triggerResize),jQuery("#collapse-menu").click(tsf._triggerResize),jQuery(".columns-prefs :input[type=radio]").change(tsf._triggerResize),jQuery(".meta-box-sortables").on("sortupdate",tsf._triggerResize)},_triggerResize:function(){jQuery(window).trigger("tsf-flex-resize")},_triggerCounterUpdate:function(){jQuery(window).trigger("tsf-counter-updated")},_triggerReady:function(){jQuery(document.body).trigger("tsf-ready")},_triggerOnLoad:function(){jQuery(document.body).trigger("tsf-onload")},_doReady:function(){tsf._triggerOnLoad(),tsf._initCounters(),tsf._initTitleInputs(),tsf._initUnboundTitleSettings(),tsf._initSocialTitleInputs(),tsf._initDescInputs(),tsf._initSocialDescInputs(),tsf._initCanonicalInput(),tsf._initWebmastersInput(),tsf.setTabsOnload(),tsf._initPostboxToggle(),tsf.taglineToggleOnload(),tsf.setColorOnload(),tsf.attachUnsavedChangesListener(),tsf.onLoadUnregisterChange(),tsf._doFlexResizeListener(),tsf._triggerReady()},setupVars:function(){tsf.counterType=parseInt(tsf.states.counterType),tsf.hasInput=tsf.states.hasInput},ready:function(e){e(".updated, .error, .notice-error, .notice-warning").insertAfter(".tsf-top-wrap"),tsf.setupVars(),e(".tsf-js-confirm-reset").on("click",tsf.confirmedReset),e(".tsf-tabs-radio").on("change",tsf.tabToggle),e(".tsf-tab").on("click",".tsf-nav-tab",tsf.addNoFocusClass),e(".tsf-flex-nav-tab-radio").on("change",tsf.flexTabToggle),e(".tsf-flex-nav-tab").on("click",".tsf-flex-nav-tab-label",tsf.addNoFocusClass),e(".tsf-dismiss").on("click",tsf.dismissNotice),e(document.body).ready(tsf._doReady)}},jQuery(tsf.ready);
