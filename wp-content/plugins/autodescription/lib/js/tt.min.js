'use strict';window.tsfTT=function(a){const b=()=>{let k=0,l=!1,m=!1;try{let z=Object.defineProperty({},'passive',{get:()=>{m=!0}});window.addEventListener('tsf-tt-test-passive',z,z).removeEventListener('tsf-tt-test-passive',z,z)}catch(z){}const n=()=>{l=!0,clearTimeout(k),k=setTimeout(()=>{l=!1},250)},o=(z,A)=>{A=A||!1;let B='pointerdown.tsfTT touchstart.tsfTT click.tsfTT',C=a(z);A?(C.off('mousemove.tsfTT mouseleave.tsfTT mouseout.tsfTT'),a(document.body).off(B)):(C.on({'mousemove.tsfTT':t,'mouseleave.tsfTT':u,'mouseout.tsfTT':u}),a(document.body).off(B).on(B,v)),C.off('tsf-tooltip-update').on('tsf-tooltip-update',q)},p=z=>{o(z,!0)},q=z=>{if(z.target.classList.contains('tsf-tooltip-item')){let A=z.target.querySelector('.tsf-tooltip-text');A instanceof Element&&(A.innerHTML=z.target.dataset.desc,a(z.target).trigger('mousemove.tsfTT'))}},r=z=>{let A=z.target.dataset.desc||z.target.title||'';A&&0===z.target.getElementsByClassName('tsf-tooltip').length&&(z.target.dataset.desc=A,z.target.title='',c(z,z.target,A))};let s=NaN;const t=z=>{let A=a(z.target),B=A.find('.tsf-tooltip'),C=B.find('.tsf-tooltip-arrow'),D=z.originalEvent&&z.originalEvent.pageX||z.pageX,E=7,F=16;D=isNaN(D)?s:D,s=D;let G=A.closest('.tsf-tooltip-wrap');G.length||(G=$hoverItem.parent());let H=D-G.offset().left-F/2,I=B.find('.tsf-tooltip-text-wrap'),J=I.outerWidth(!0),K=B.data('adjust'),L=J-F-E;if(K=parseInt(K,10),K=isNaN(K)?0:Math.round(K),K&&(H-=K,L+K>G.outerWidth(!0))){let M=I.find('.tsf-tooltip-text'),N=M.outerWidth(!0);L=N-F-E}H<=E?C.css('left',E+'px'):H>=L?C.css('left',L+'px'):C.css('left',H+'px')},u=z=>{l||(f(z.target),p(z.target))},v=z=>{n();let D,B='.tsf-tooltip',C=a(z.target);if(C.hasClass('tsf-tooltip-item')&&(D=C.find(B)),!D){let E=C.children('.tsf-tooltip-item');E.length&&(D=E.find(B))}D&&D.length?a(B).not(D).remove():a(B).remove()},w=z=>{if(!l){let A=!1;switch(z.type){case'mouseenter':break;case'pointerdown':case'touchstart':A=!0;break;default:}A&&v(z),r(z),t(z),o(z.target)}},x=z=>{z.target.classList.contains('tsf-tooltip-item')&&w(z),z.stopPropagation()},y=()=>{let z=document.querySelectorAll('.tsf-tooltip-wrap'),A=!m||{capture:!0,passive:!0};for(let B=0;B<z.length;B++)'mouseenter pointerdown touchstart'.split(' ').forEach(C=>{z[B].removeEventListener(C,x,A),z[B].addEventListener(C,x,A)})};y(),a(window).on('tsf-tooltip-reset',y),d('#wpcontent'),d('#editor')},c=(k,l,m)=>{let n=a(l);if(n.find('.tsf-tooltip').length&&f(l),!!m.length){let o=a('<div class="tsf-tooltip"><span class="tsf-tooltip-text-wrap"><span class="tsf-tooltip-text">'+m+'</span></span><div class="tsf-tooltip-arrow"></div></div>');n.append(o);let p=n.closest('.tsf-tooltip-boundary');p=p.length&&p||a(document.body);let q=n.outerHeight()+8,r=o.offset().top-q,s=p.offset().top-(p.prop('scrolltop')||0);s>r?(o.addClass('tsf-tooltip-down'),o.css('top',q+'px')):o.css('bottom',q+'px');let t=n.closest('.tsf-tooltip-wrap');t.length||(t=n.parent());let u=o.find('.tsf-tooltip-text-wrap'),v=u.find('.tsf-tooltip-text'),w=t.width(),x=u.outerWidth(!0),y=v.outerWidth(!0),z=u.offset().left,B=p.offset().left-(p.prop('scrollLeft')||0),C=B+p.width(),D='left',E=NaN;if(z<B)E=B-z+12;else if(z+x>C)E=C-z-x-12;else if(42>w)E=2*-w+w/2,-E>x&&(E=-15);else if(k&&1>a(k.target).find(o).length)E=0;else if(k&&w>x){let F=k.originalEvent&&k.originalEvent.pageX||k.pageX,G=t.offset().left,I=F-G-x/2;E=I,0>I?E=0:I+x>w&&(E=w-y)}if(!isNaN(E)){let F=parseInt(u.css('flex-basis'),10);E<-F&&(E=-F),o.css(D,E+'px'),o.data('adjust',E),o.data('adjustDir',D)}}},d=k=>{a(k).addClass('tsf-tooltip-boundary')},f=k=>{g(k).remove()},g=k=>{return a(k).find('.tsf-tooltip').first()};return a.extend({load:function(){a(document.body).ready(b)}},{doTooltip:c,removeTooltip:f,getTooltip:g,addBoundary:d,triggerReset:()=>{a(window).trigger('tsf-tooltip-reset')},triggerUpdate:k=>{a(k||'.tsf-tooltip-item').trigger('tsf-tooltip-update')}})}(jQuery),jQuery(window.tsfTT.load);
